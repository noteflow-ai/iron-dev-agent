<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PRD & UI 生成器</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='20' fill='%234a6fdc'/%3E%3Ctext x='50' y='75' font-size='70' text-anchor='middle' fill='white' font-family='Arial, sans-serif'%3EP%3C/text%3E%3C/svg%3E" type="image/svg+xml">
</head>
<body>
    <div class="container-fluid">
        <div class="row vh-100">
            <!-- 左侧聊天区域 -->
            <div class="col-4 chat-container" id="chatSidebar">
                <!-- 侧边栏切换按钮 -->
                <button id="toggleSidebarBtn" class="btn btn-sm btn-light toggle-sidebar-btn" title="收起侧边栏">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
                    </svg>
                </button>
                <div class="card h-100">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">与Q Developer对话</h5>
                    </div>
                    <div class="card-body chat-messages-wrapper">
                        <div class="chat-messages" id="chatMessages">
                            <!-- 聊天消息将在这里显示 -->
                        </div>
                        <!-- 滚动到底部按钮 -->
                        <button id="scrollToBottomBtn" class="btn btn-sm btn-primary scroll-to-bottom-btn" title="滚动到最新消息">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-down" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M8 1a.5.5 0 0 1 .5.5v11.793l3.146-3.147a.5.5 0 0 1 .708.708l-4 4a.5.5 0 0 1-.708 0l-4-4a.5.5 0 0 1 .708-.708L7.5 13.293V1.5A.5.5 0 0 1 8 1z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="card-footer">
                        <div class="input-group">
                            <textarea class="form-control" id="userInput" placeholder="输入您的需求描述..." rows="3"></textarea>
                            <button class="btn btn-primary" id="sendBtn">发送</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 右侧预览区域 -->
            <div class="col-8 preview-container">
                <ul class="nav nav-tabs" id="previewTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="prd-tab" data-bs-toggle="tab" data-bs-target="#prd" type="button" role="tab" aria-controls="prd" aria-selected="true">PRD 预览</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="ui-tab" data-bs-toggle="tab" data-bs-target="#ui" type="button" role="tab" aria-controls="ui" aria-selected="false">UI 预览</button>
                    </li>
                </ul>
                <div class="tab-content h-100" id="previewTabsContent">
                    <div class="tab-pane fade show active h-100" id="prd" role="tabpanel" aria-labelledby="prd-tab">
                        <div class="card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">PRD.md 预览</h5>
                                <button class="btn btn-sm btn-outline-secondary" id="downloadPRD">下载 PRD</button>
                            </div>
                            <div class="card-body markdown-content" id="prdContent">
                                <!-- PRD 内容将在这里显示 -->
                                <p class="text-muted">请在左侧输入您的需求描述，AI将为您生成PRD文档...</p>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade h-100" id="ui" role="tabpanel" aria-labelledby="ui-tab">
                        <div class="card h-100">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">UI.html 预览</h5>
                                <button class="btn btn-sm btn-outline-secondary" id="downloadUI">下载 UI</button>
                            </div>
                            <div class="card-body" id="uiPreviewWrapper">
                                <iframe id="uiPreview" class="w-100 h-100" srcdoc="<p>请在左侧输入您的需求描述，AI将为您生成UI界面...</p>" sandbox="allow-scripts allow-popups allow-popups-to-escape-sandbox allow-same-origin"></iframe>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 侧边栏收起时的固定按钮 -->
    <button id="sidebarToggleFixed" class="btn btn-sm btn-light" title="展开侧边栏">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>
        </svg>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
